build-id-var: CUSTOM_BUILD_NUM
tag-suffix: -t{{BuildID}}
template-vars:
  CURRENT_GO_VERSION: 1.10
  PREVIOUS_GO_VERSION: 1.9.4
  CURRENT_GO_SRC_SHA256: f3de49289405fda5fd1483a8fe6bd2fa5469e005fd567df64485c4fa000c7f24
  CURRENT_GO_LINUX_AMD64_SHA256: b5a64335f1490277b585832d1f6c7f8c6c11206cba5cd3f771dcb87b98ad1a33
  PREVIOUS_GO_SRC_SHA256: 0573a8df33168977185aa44173305e5a0450f55213600e94541604b75d46dc06
  PREVIOUS_GO_LINUX_AMD64_SHA256: 15b0937615809f87321a457bb1265f946f9f6e736c563d6c5e0bd2c22e44f779
  GODEL_VERSION: 1.3.0
  GO_1_10_VERSION: 1.10
  GO_1_9_VERSION: 1.9.4
  DOCKER_VERSION: 17.03.0-ce
builds:
  alpine-go:
    docker-template: alpine-go-template/Dockerfile_template.txt
    tag: nmiyake/go:alpine-go-{{.GO_VERSION}}
    for:
      GO_VERSION:
        - "{{.GO_1_10_VERSION}}"
        - "{{.GO_1_9_VERSION}}"
  brew-go:
    docker-template: brew-go/Dockerfile_template.txt
    tag: nmiyake/go:brew-go
  go-darwin-linux:
    docker-template: go-darwin-linux/Dockerfile_template.txt
    tag: nmiyake/go:go-darwin-linux-{{.CURRENT_GO_VERSION}}
  go-darwin-linux-docker-bsdtar-unzip:
    docker-template: go-darwin-linux-docker-bsdtar-unzip/Dockerfile_template.txt
    tag: nmiyake/go:go-darwin-linux-{{.CURRENT_GO_VERSION}}-docker-{{.DOCKER_VERSION}}-bsdtar-unzip
    requires:
      - go-darwin-linux
  go-darwin-linux-docker-java-ruby-netcat:
    docker-template: go-darwin-linux-docker-java-ruby-netcat/Dockerfile_template.txt
    tag: nmiyake/go:go-darwin-linux-{{.CURRENT_GO_VERSION}}-docker-{{.DOCKER_VERSION}}-java-ruby-netcat
    requires:
      - go-darwin-linux
  go-darwin-linux-no-cgo:
    docker-template: go-darwin-linux-no-cgo/Dockerfile_template.txt
    tag: nmiyake/go:go-darwin-linux-no-cgo-{{.CURRENT_GO_VERSION}}
  go-darwin-linux-no-cgo-docker-rpm-fpm:
    docker-template: go-darwin-linux-no-cgo-docker-rpm-fpm-template/Dockerfile_template.txt
    tag: nmiyake/go:go-darwin-linux-no-cgo-{{.CURRENT_GO_VERSION}}-docker-{{.DOCKER_VERSION}}-rpm-fpm
    requires:
      - go-darwin-linux-no-cgo
  go-docker:
    docker-template: go-docker-template/Dockerfile_template.txt
    tag: nmiyake/go:go-{{.CURRENT_GO_VERSION}}-docker-{{.DOCKER_VERSION}}
