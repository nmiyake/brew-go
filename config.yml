build-id-var: CUSTOM_BUILD_NUM
tag-suffix: -t{{BuildID}}
template-vars:
  CURRENT_GO_VERSION: 1.11
  PREVIOUS_GO_VERSION: 1.10.4
  CURRENT_GO_SRC_SHA256: 567b1cc66c9704d1c019c50bef946272e911ec6baf244310f87f4e678be155f2
  CURRENT_GO_LINUX_AMD64_SHA256: fa1b0e45d3b647c252f51f5e1204aba049cde4af177ef9f2181f43004f901035
  PREVIOUS_GO_SRC_SHA256: 582814fa45e8ecb0859a208e517b48aa0ad951e3b36c7fff203d834e0ef27722
  PREVIOUS_GO_LINUX_AMD64_SHA256: 88573008f4f6233b81f81d8ccf92234b4f67238df0f0ab173d75a302a1f3d6ee
  GODEL_VERSION: 1.3.0
  GO_1_10_VERSION: 1.10.4
  GO_1_9_VERSION: 1.9.7
  DOCKER_VERSION: 17.06.0-ce
builds:
  alpine-go:
    docker-template: alpine-go-template/Dockerfile_template.txt
    tag: nmiyake/go:alpine-go-{{.GO_VERSION}}
    for:
      GO_VERSION:
        - "{{.CURRENT_GO_VERSION}}"
        - "{{.PREVIOUS_GO_VERSION}}"
  alpine-go-java-8u171:
    docker-template: alpine-go-java-8u171-template/Dockerfile_template.txt
    tag: nmiyake/go:alpine-go-{{.CURRENT_GO_VERSION}}-java-8u171
    requires:
      - alpine-go
  brew-go:
    docker-template: brew-go/Dockerfile_template.txt
    tag: nmiyake/go:brew-go
  go-darwin-linux:
    docker-template: go-darwin-linux/Dockerfile_template.txt
    tag: nmiyake/go:go-darwin-linux-{{.CURRENT_GO_VERSION}}
  go-darwin-linux-docker-bsdtar-unzip:
    docker-template: go-darwin-linux-docker-bsdtar-unzip/Dockerfile_template.txt
    tag: nmiyake/go:go-darwin-linux-{{.CURRENT_GO_VERSION}}-docker-{{.DOCKER_VERSION}}-bsdtar-unzip
    requires:
      - go-darwin-linux
  go-darwin-linux-docker-java-ruby-netcat:
    docker-template: go-darwin-linux-docker-java-ruby-netcat/Dockerfile_template.txt
    tag: nmiyake/go:go-darwin-linux-{{.CURRENT_GO_VERSION}}-docker-{{.DOCKER_VERSION}}-java-ruby-netcat
    requires:
      - go-darwin-linux
  go-darwin-linux-no-cgo:
    docker-template: go-darwin-linux-no-cgo/Dockerfile_template.txt
    tag: nmiyake/go:go-darwin-linux-no-cgo-{{.CURRENT_GO_VERSION}}
  go-darwin-linux-no-cgo-docker-rpm-fpm:
    docker-template: go-darwin-linux-no-cgo-docker-rpm-fpm-template/Dockerfile_template.txt
    tag: nmiyake/go:go-darwin-linux-no-cgo-{{.CURRENT_GO_VERSION}}-docker-{{.DOCKER_VERSION}}-rpm-fpm
    requires:
      - go-darwin-linux-no-cgo
  go-docker:
    docker-template: go-docker-template/Dockerfile_template.txt
    tag: nmiyake/go:go-{{.CURRENT_GO_VERSION}}-docker-{{.DOCKER_VERSION}}
