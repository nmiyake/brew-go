build-id-var: CUSTOM_BUILD_NUM
tag-suffix: -t{{BuildID}}
template-vars:
  CURRENT_GO_VERSION: 1.10.2
  PREVIOUS_GO_VERSION: 1.9.6
  CURRENT_GO_SRC_SHA256: 6264609c6b9cd8ed8e02ca84605d727ce1898d74efa79841660b2e3e985a98bd
  CURRENT_GO_LINUX_AMD64_SHA256: 4b677d698c65370afa33757b6954ade60347aaca310ea92a63ed717d7cb0c2ff
  PREVIOUS_GO_SRC_SHA256: 36f4059be658f7f07091e27fe04bb9e97a0c4836eb446e4c5bac3c90ff9e5828
  PREVIOUS_GO_LINUX_AMD64_SHA256: d1eb07f99ac06906225ac2b296503f06cc257b472e7d7817b8f822fe3766ebfe
  GODEL_VERSION: 1.3.0
  GO_1_10_VERSION: 1.10.2
  GO_1_9_VERSION: 1.9.6
  DOCKER_VERSION: 17.03.0-ce
builds:
  alpine-go:
    docker-template: alpine-go-template/Dockerfile_template.txt
    tag: nmiyake/go:alpine-go-{{.GO_VERSION}}
    for:
      GO_VERSION:
        - "{{.GO_1_10_VERSION}}"
        - "{{.GO_1_9_VERSION}}"
  brew-go:
    docker-template: brew-go/Dockerfile_template.txt
    tag: nmiyake/go:brew-go
  go-darwin-linux:
    docker-template: go-darwin-linux/Dockerfile_template.txt
    tag: nmiyake/go:go-darwin-linux-{{.CURRENT_GO_VERSION}}
  go-darwin-linux-docker-bsdtar-unzip:
    docker-template: go-darwin-linux-docker-bsdtar-unzip/Dockerfile_template.txt
    tag: nmiyake/go:go-darwin-linux-{{.CURRENT_GO_VERSION}}-docker-{{.DOCKER_VERSION}}-bsdtar-unzip
    requires:
      - go-darwin-linux
  go-darwin-linux-docker-java-ruby-netcat:
    docker-template: go-darwin-linux-docker-java-ruby-netcat/Dockerfile_template.txt
    tag: nmiyake/go:go-darwin-linux-{{.CURRENT_GO_VERSION}}-docker-{{.DOCKER_VERSION}}-java-ruby-netcat
    requires:
      - go-darwin-linux
  go-darwin-linux-no-cgo:
    docker-template: go-darwin-linux-no-cgo/Dockerfile_template.txt
    tag: nmiyake/go:go-darwin-linux-no-cgo-{{.CURRENT_GO_VERSION}}
  go-darwin-linux-no-cgo-docker-rpm-fpm:
    docker-template: go-darwin-linux-no-cgo-docker-rpm-fpm-template/Dockerfile_template.txt
    tag: nmiyake/go:go-darwin-linux-no-cgo-{{.CURRENT_GO_VERSION}}-docker-{{.DOCKER_VERSION}}-rpm-fpm
    requires:
      - go-darwin-linux-no-cgo
  go-docker:
    docker-template: go-docker-template/Dockerfile_template.txt
    tag: nmiyake/go:go-{{.CURRENT_GO_VERSION}}-docker-{{.DOCKER_VERSION}}
